{% extends 'base.html' %}

{% block body %}
    <h1 class="page-header">DatePicker demo</h1>

    <div class="alert alert-info">
    This is a very primitive demo. Just a show case how to run it.
    </div>

    <form class="form form-horizontal" method="POST" action="">
        {% csrf_token %}
        {{ form.period }}
        <!--<input type="submit" class="btn btn-primary">-->
    </form>

    {{ form.media }}

    {% if period %}
        <div class="alert alert-success">
        Congratulations!! Here is selected period: {{ period }}
        </div>
    {% endif %}

    <div id="flot-placeholder" style="width:600px;height:300px"></div>

<script src="/static/vendors/jquery/dist/jquery.min.js"></script>

  <!-- Flot -->

 <script src="/static/vendors/Flot/jquery.flot.js"></script>
  <script src="/static/vendors/Flot/jquery.flot.pie.js"></script>
  <script src="/static/vendors/Flot/jquery.flot.time.js"></script>
  <script src="/static/vendors/Flot/jquery.flot.stack.js"></script>
  <script src="/static/vendors/Flot/jquery.flot.resize.js"></script>


<script>
var data = [];
var totalPoints = 100;
var updateInterval = 1000;
var now = new Date().getTime();

function GetData() {
    data.shift(); //移除数组中的第一个项目

    while (data.length < totalPoints) {
        var y = Math.random() * 100;
        var temp = [now += updateInterval, y]; //data format [x, y]

        data.push(temp);
    }
}

series: {
    lines: {
        show: true,
        lineWidth: 1,
        fill: true
    }
}

xaxis: {
    mode: "time",
    tickSize: [2, "second"],
    tickFormatter: function (v, axis) {
        var date = new Date(v);

        if (date.getSeconds() % 20 == 0) {
            var hours = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
            var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
            var seconds = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();

            return hours + ":" + minutes + ":" + seconds;
        } else {
            return "";
        }
    },
    axisLabel: "Time",
    axisLabelUseCanvas: true,
    axisLabelFontSizePixels: 12,
    axisLabelFontFamily: 'Verdana, Arial',
    axisLabelPadding: 10
}

yaxis: {
    min: 0,
    max: 100,
    tickFormatter: function (v, axis) {
        if (v % 10 == 0) {
            return v + "%";
        } else {
            return "";
        }
    },
    axisLabel: "CPU loading",
    axisLabelUseCanvas: true,
    axisLabelFontSizePixels: 12,
    axisLabelFontFamily: 'Verdana, Arial',
    axisLabelPadding: 6
}

legend: {
    labelBoxBorderColor: "#fff"
}

grid: {
    backgroundColor: "#000000",
    tickColor: "#008040"
}$(document).ready(function () {
    GetData();

    dataset = [
        { label: "CPU", data: data, color: "#00FF00" }
    ];

    $.plot($("#flot-placeholder1"), dataset, options);

    function update() {
        GetData();

        $.plot($("#flot-placeholder1"), dataset, options)
        setTimeout(update, updateInterval);
    }

    update();
});

$(document).ready(function () {
    GetData();

    dataset = [
        { label: "CPU", data: data, color: "#00FF00" }
    ];

    $.plot($("#flot-placeholder1"), dataset, options);

    function update() {
        GetData();

        $.plot($("#flot-placeholder1"), dataset, options)
        setTimeout(update, updateInterval);
    }

    update();
});


</script>



{% endblock %}